# Compiler Kidscode

https://www.visualstudio.com/fr/downloads/

	télécharger et installer Visual Studio Community 2017 

http://www.7-zip.org/download.html

	télécharger et installer 7-Zip
	
https://cmake.org/download/
https://cmake.org/files/v3.9/cmake-3.9.4-win64-x64.msi

    lancer cmake-3.9.4-win64-x64.msi
        + Add CMake to the system PATH for all users
        C:\Program Files\CMake\

https://sourceforge.net/projects/getgnuwin32/files/latest/download?source=files

    lancer GetGnuWin32-0.6.3.exe
        C:\

    c:
    cd \GetGnuWin32
    download.bat
    install.bat c:\gnuwin32
        enter
        enter
        enter

https://git-scm.com/download/win

    lancer Git-2.14.3-64-bit.exe
        C:\Program Files\Git
        + Use Git from the Windows Command Prompt
        + Use the OpenSSL library
        + Checkout as-is, commit as-is
        + Use MinTTY

C:
md \KIDSCODE
cd \KIDSCODE
git clone -b windows https://github.com/cookiegranola/adel
cd adel
git clone --recursive https://github.com/cookiegranola/minetest_game games/minetest_game

https://www.dropbox.com/s/t3fuc61116lytva/Minetest_MSVC_Win32_libraries_compiled_170104.7z 
(ou utiliser celui du répertoire howto)

    extraire Minetest_MSVC_Win32_libraries_compiled_170104.7z dans C:\KIDSCODE
	
https://www.enterprisedb.com/postgresql-959-binaries-win32?ls=Crossover&type=Crossover
https://get.enterprisedb.com/postgresql/postgresql-9.5.9-1-windows-binaries.zip
(ou utiliser celui du répertoire howto)

    extraire postgresql-9.5.9-1-windows-binaries.zip dans C:\KIDSCODE
    
Le répertoire C:\KIDSCODE contiendra alors ceci :

	adel
	curl-master
	freetype-2.7.0
	irrlicht-1.8.1
	libogg-1.3.1
	libvorbis-1.3.3
	LuaJIT-master
	openal-soft-1.15.1
	pgsql
	postgresql-9.5.3
	spatialindex-1.8.5
	sqlite-3.15.2
	zlib-1.2.8

del CMakeCache.txt
cmake . -DBUILD_CLIENT=1 -DBUILD_SERVER=0 -DRUN_IN_PLACE=1 -DCURL_INCLUDE_DIR=C:\KIDSCODE\curl-master\include -DCURL_LIBRARY=C:\KIDSCODE\curl-master\bin\libcurl_imp.lib -DCURL_DLL=C:\KIDSCODE\curl-master\bin\libcurl.dll -DFREETYPE_INCLUDE_DIRS=C:\KIDSCODE\freetype-2.7.0\include -DFREETYPE_INCLUDE_DIR_freetype2=C:\KIDSCODE\freetype-2.7.0\include -DFREETYPE_INCLUDE_DIR_ft2build=C:\KIDSCODE\freetype-2.7.0\include -DFREETYPE_LIBRARY=C:\KIDSCODE\freetype-2.7.0\bin\freetype27.lib -DIRRLICHT_INCLUDE_DIR=C:\KIDSCODE\irrlicht-1.8.1\include -DIRRLICHT_LIBRARY=C:\KIDSCODE\irrlicht-1.8.1\bin\Irrlicht.lib -DIRRLICHT_DLL=C:\KIDSCODE\irrlicht-1.8.1\bin\Irrlicht.dll -DVORBIS_INCLUDE_DIR=C:\KIDSCODE\libvorbis-1.3.3\include -DOGG_INCLUDE_DIR=C:\KIDSCODE\libogg-1.3.1\include -DOGG_LIBRARY=C:\KIDSCODE\libogg-1.3.1\bin\libogg.lib -DOGG_DLL=C:\KIDSCODE\libogg-1.3.1\bin\libogg.dll -DVORBIS_LIBRARY=C:\KIDSCODE\libvorbis-1.3.3\bin\libvorbis.lib -DVORBIS_DLL=C:\KIDSCODE\libvorbis-1.3.3\bin\libvorbis.dll -DVORBISFILE_LIBRARY=C:\KIDSCODE\libvorbis-1.3.3\bin\libvorbisfile.lib -DVORBISFILE_DLL=C:\KIDSCODE\libvorbis-1.3.3\bin\libvorbisfile.dll -DOPENAL_INCLUDE_DIR=C:\KIDSCODE\openal-soft-1.15.1\include\AL -DOPENAL_LIBRARY=C:\KIDSCODE\openal-soft-1.15.1\bin\OpenAL32.lib -DOPENAL_DLL=C:\KIDSCODE\openal-soft-1.15.1\bin\OpenAL32.dll -DPostgreSQL_INCLUDE_DIR=C:\KIDSCODE\postgresql-9.5.3\include -DPostgreSQL_TYPE_INCLUDE_DIR=C:\KIDSCODE\postgresql-9.5.3\include -DPostgreSQL_LIBRARY=C:\KIDSCODE\postgresql-9.5.3\bin\libpq.lib -DPOSTGRESQL_LIBRARY=C:\KIDSCODE\postgresql-9.5.3\bin\libpq.lib -DSQLITE3_INCLUDE_DIR=C:\KIDSCODE\sqlite-3.15.2\include -DSQLITE3_LIBRARY=C:\KIDSCODE\sqlite-3.15.2\bin\sqlite3.lib -DZLIB_INCLUDE_DIR=C:\KIDSCODE\zlib-1.2.8\include -DZLIB_LIBRARIES=C:\KIDSCODE\zlib-1.2.8\bin\ZlibDllRelease\zlibwapi.lib -DZLIB_DLL=C:\KIDSCODE\zlib-1.2.8\bin\ZlibDllRelease\zlibwapi.dll

ouvrir C:\KIDSCODE\adel\kidscode.sln avec Visual Studio 2017

    choisir minetest comme projet de démarrage

    dans les propriétés du projet minetest
    
        dans la section "Entrée" de "Editeur de liens"
            
            ajouter "LIBCMT" aux bibliothèques par défaut spécifiques ignorées pour les solutions Debug/RelWithDebInfo Win32

                %(IgnoreSpecificDefaultLibraries) LIBCMT
        
        dans la section "Général" de "C/C++"
        
            mettre "Aucun" comme format des informations de débogage pour la solution RelWithDebInfo Win32
        
    générer les solutions Debug/RelWithDebInfo Win32

copy C:\KIDSCODE\adel\howto\dlls\*.dll C:\KIDSCODE\adel\bin\Debug\
copy C:\KIDSCODE\adel\howto\dlls\*.dll C:\KIDSCODE\adel\bin\RelWithDebInfo\

lancer 
    C:\KIDSCODE\adel\bin\Debug\kidscode.exe
    ou
    C:\KIDSCODE\adel\bin\RelWithDebInfo\kidscode.exe

---

# Tester l'outil de crytage sur les fichiers lua de test

cd util\crypt
cmake .

ouvrir C:\KIDSCODE\adel\util\crypt\crypt.sln avec Visual Studio 2017

	générer les solutions Debug/Release Win32
	
cd test
run.bat

---

# Encrypter tous les fichiers lua du répertoire adel\games

cd util\crypt
cmake .

ouvrir C:\KIDSCODE\adel\util\crypt\crypt.sln avec Visual Studio 2017

	générer les solutions Debug/Release Win32
	
cd test
encrypt_games.bat

---

# Références

http://dev.minetest.net/Compiling_Minetest
http://krock-works.16mb.com/MTstuff/Compile_Minetest_MSVC.txt
https://forum.minetest.net/viewtopic.php?t=9190
https://github.com/mdoege/mtmake-osx

